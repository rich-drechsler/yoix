import yoix.io.*;
import yoix.stdio.*;

String input[] = "Now is the time\nfor all good men\nto come to the aid\n...\n";

fp_in = open(input, "r", STRINGSTREAM);
fp_out = open("/tmp/xxx", "w", FILE);
while(fp_out.nextbuf = fp_in.nextbuf);
close(fp_in);
close(fp_out);

fp_in = open("/tmp/xxx", "r", FILE);
fp_out = open("/tmp/yyy", "w", FILE);
reopen(fp_in, stdin);
reopen(fp_out, stdout);
while(stdout.nextbuf = stdin.nextbuf) {
	fprintf(stderr, "Length is %d\n", stdout.size);
}
fprintf(stderr, "Checking...\n");

fp_in = open("/tmp/yyy", "r", FILE);
fp_out = open(NULL, "w", STRINGSTREAM);
while(fp_out.nextbuf = fp_in.nextbuf) {
	fprintf(stderr, "Length is %d\n", fp_out.name@length);
}
fprintf(stderr, "Output is %s", fp_out.name);
